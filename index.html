<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üé∞ College Casino</title>
  <style>
    :root { --bg:#0b0b0b; --panel:#111; --accent:gold; --muted:#9aa0a6; }
    html,body { height:100%; margin:0; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: radial-gradient(circle at center, #121212 0%, #000 70%);
      color: #fff;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      padding:20px;
      box-sizing:border-box;
    }
    h1 { color:var(--accent); text-shadow:0 0 10px rgba(255,165,0,0.3); margin:8px 0; }
    .slot {
      display:flex; gap:12px; justify-content:center; align-items:center; margin:8px 0;
    }
    .reel {
      font-size:48px;
      width:84px; height:84px;
      border-radius:12px;
      border:2px solid rgba(255,215,0,0.9);
      display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      box-shadow: 0 6px 18px rgba(0,0,0,0.6), inset 0 0 12px rgba(255,215,0,0.06);
      user-select:none;
    }
    .controls { display:flex; gap:12px; align-items:center; flex-direction:column; }
    button {
      background:var(--accent); color:#111; border:none; border-radius:10px; padding:10px 18px;
      font-size:18px; cursor:pointer; transition:transform .12s ease, box-shadow .12s;
      box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }
    button:hover { transform:translateY(-3px); box-shadow:0 12px 24px rgba(0,0,0,0.6); }
    #message { min-height:24px; color:#ffd; margin:6px 0; }
    .panel {
      width:100%; max-width:760px; background:var(--panel); border-radius:12px; padding:14px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    }
    table {
      width:100%; border-collapse:collapse; color:#fff; margin-top:12px; font-size:15px;
    }
    th, td { padding:8px 10px; border-bottom:1px solid rgba(255,255,255,0.04); text-align:left; }
    th { background:rgba(255,255,255,0.02); color:var(--muted); font-weight:600; }
    tr:nth-child(even) td { background: rgba(255,255,255,0.01); }
    .muted { color:var(--muted); font-size:13px; }
    @media (max-width:480px) {
      .reel { width:64px; height:64px; font-size:36px; }
      button { font-size:16px; padding:8px 14px; }
    }
  </style>
</head>
<body>

  <h1>üé∞ College Casino</h1>

  <div class="panel" aria-live="polite" style="text-align:center;">
    <div class="slot" aria-hidden="false">
      <div class="reel" id="r1">üçí</div>
      <div class="reel" id="r2">üçã</div>
      <div class="reel" id="r3">üçá</div>
    </div>

    <div class="controls">
      <button id="spinBtn" type="button">–ö—Ä—É—Ç–∏—Ç—å üé≤</button>
      <div id="message" class="muted"></div>
    </div>

    <hr style="margin:14px 0; border:none; border-top:1px solid rgba(255,255,255,0.03)">

    <h3 style="margin:0 0 8px 0;">üèÜ –¢–∞–±–ª–∏—Ü–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π</h3>
    <div id="resultsPanel" style="overflow-x:auto">
      <table id="results" aria-label="–¢–∞–±–ª–∏—Ü–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π">
        <thead>
          <tr><th>–ò–º—è</th><th>–ü–æ–ø—ã—Ç–∫–∏</th><th>–î–∞—Ç–∞</th></tr>
        </thead>
        <tbody>
          <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </tbody>
      </table>
    </div>
    <div class="muted" style="margin-top:8px">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ <code>results.json</code> –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.</div>
  </div>

<script>
/* –ü–æ–ª–Ω—ã–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥:
   - –ù–∞–¥—ë–∂–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ getElementById
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç results.json (–æ–∂–∏–¥–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ {name, tries, date})
   - –ü—Ä–∏ –ø–æ–±–µ–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –Ω–∞ GitHub Dispatch (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω/Actions)
   - –§–æ–ª–±—ç–∫: –µ—Å–ª–∏ results.json –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è demoScores
*/

(() => {
  // –≠–ª–µ–º–µ–Ω—Ç—ã
  const r1 = document.getElementById('r1');
  const r2 = document.getElementById('r2');
  const r3 = document.getElementById('r3');
  const spinBtn = document.getElementById('spinBtn');
  const messageEl = document.getElementById('message');
  const resultsTbody = document.querySelector('#results tbody');

  let tries = 0;
  const symbols = ["üçí","üçã","üçá","üçâ","‚≠ê","üíé"];
  const SCORES_PATH = './results.json'; // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

  // –î–µ–º–æ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Ñ–æ–ª–±—ç–∫)
  const demoScores = [
    { name: 'Alice', tries: 5, date: new Date().toLocaleString() },
    { name: 'Bob', tries: 9, date: new Date().toLocaleString() }
  ];

  // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
  function renderResults(scores) {
    resultsTbody.innerHTML = '';
    if (!Array.isArray(scores) || scores.length === 0) {
      const tr = document.createElement('tr');
      tr.innerHTML = '<td colspan="3" class="muted">–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</td>';
      resultsTbody.appendChild(tr);
      return;
    }
    // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫ –ø–µ—Ä–≤–æ–º—É (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–µ—Ä—Ö—É)
    for (let i = scores.length - 1; i >= 0; i--) {
      const row = scores[i];
      const tr = document.createElement('tr');
      const name = escapeHtml(String(row.name ?? 'Player'));
      const triesVal = escapeHtml(String(row.tries ?? row.attempts ?? 0));
      const date = escapeHtml(String(row.date ?? '‚Äî'));
      tr.innerHTML = `<td>${name}</td><td>${triesVal}</td><td>${date}</td>`;
      resultsTbody.appendChild(tr);
    }
  }

  function escapeHtml(s) {
    return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —Ñ–æ–ª–±—ç–∫–æ–º
  async function loadResults() {
    try {
      const res = await fetch(SCORES_PATH + '?_=' + Date.now(), { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const json = await res.json();
      if (!Array.isArray(json)) throw new Error('Invalid JSON: expected array');
      renderResults(json);
    } catch (e) {
      console.warn('[results] load failed, using demo', e);
      renderResults(demoScores);
    }
  }

  // sendResult: –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ GitHub dispatch (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏ Action)
  async function sendResult(name, triesCount) {
    // –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ç–æ–∫–µ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ.
    // –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Actions + repository_dispatch —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ proxied endpoint.
    const payload = { name, tries: triesCount, date: new Date().toLocaleString() };

    try {
      // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: –∑–∞–º–µ–Ω–∏—Ç–µ GITHUB_TOKEN_PLACEHOLDER –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
      const token = 'GITHUB_TOKEN_PLACEHOLDER';
      if (!token || token.includes('PLACEHOLDER')) {
        // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π alert –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
        console.info('[sendResult] token missing ‚Äî skipping network dispatch', payload);
        // –î–æ–±–∞–≤–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É (–¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ UX)
        demoScores.push(payload);
        renderResults(demoScores);
        return;
      }

      const resp = await fetch('https://api.github.com/repos/BodSeb/College-casino/dispatches', {
        method: 'POST',
        headers: {
          'Accept': 'application/vnd.github+json',
          'Authorization': 'Bearer ' + token,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          event_type: 'update_results',
          client_payload: payload
        })
      });
      if (!resp.ok) throw new Error('HTTP ' + resp.status);
      alert('–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
      // –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–æ–∫–∞–ª—å–Ω–æ/–ø–æ–¥–æ–∂–¥–∞—Ç—å Action –∏ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å results.json
      demoScores.push(payload);
      renderResults(demoScores);
    } catch (err) {
      console.error('[sendResult] failed', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –û–Ω –¥–æ–±–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ.');
      demoScores.push(payload);
      renderResults(demoScores);
    }
  }

  // Spin logic
  async function spin() {
    tries++;
    messageEl.textContent = '';

    spinBtn.disabled = true;
    spinBtn.style.opacity = '0.8';

    const reels = [r1, r2, r3];
    const baseDelays = [60, 80, 100];
    const spinsCounts = [10 + Math.floor(Math.random()*6), 14 + Math.floor(Math.random()*6), 18 + Math.floor(Math.random()*8)];

    const total = Math.max(...spinsCounts);
    for (let i = 0; i < total; i++) {
      for (let j = 0; j < reels.length; j++) {
        if (i < spinsCounts[j]) {
          reels[j].textContent = symbols[Math.floor(Math.random()*symbols.length)];
        }
      }
      // progressive delay to make it feel like slowing down
      await new Promise(r => setTimeout(r, baseDelays[Math.min(i, baseDelays.length-1)] + (i * 6)));
    }

    spinBtn.disabled = false;
    spinBtn.style.opacity = '1';

    const [a, b, c] = reels.map(r => r.textContent);
    if (a === b && b === c) {
      const name = prompt('üéâ –ü–æ–±–µ–¥–∞! –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:');
      if (name && name.trim()) {
        messageEl.textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, ${name.trim()}! üçÄ`;
        await sendResult(name.trim(), tries);
        tries = 0;
      } else {
        messageEl.textContent = '–ü–æ–±–µ–¥–∞! –ù–æ –∏–º—è –Ω–µ –≤–≤–µ–¥–µ–Ω–æ.';
      }
    } else {
      messageEl.textContent = '–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!';
    }
  }

  // –°–≤—è–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è
  spinBtn.addEventListener('click', spin);
  // –ë—ã—Å—Ç—Ä–∞—è –∫–ª–∞–≤–∏—à–∞ –ø—Ä–æ–±–µ–ª (–µ—Å–ª–∏ —Ñ–æ–∫—É—Å –Ω–µ –≤ input)
  document.addEventListener('keydown', (e) => {
    if (e.code === 'Space' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
      e.preventDefault();
      spinBtn.click();
    }
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  loadResults();

})();
</script>

</body>
</html>
```[43dcd9a7-70db-4a1f-b0ae-981daa162054](https://github.com/1milligram/1loc/tree/74b3c14a1a1ab26029d650f157447302939409f1/collections%2Fstring%2Fescape-html-special-characters.md?citationMarker=43dcd9a7-70db-4a1f-b0ae-981daa162054&citationId=1 "github.com")